<!-- https://www.amocrm.ru/developers/content/digital_pipeline/feedback_button -->

# Добавление информации

Кнопка обратной связи

API для передачи даных о посетителе страницы, с  кнопкой обратной связи.

Если человек зашел на ваш сайт, где расположена кнопка, и написал в чат через Telegram, Facebook Messenger, Viber, Вконтакте, Онлайн чат, вы можете собрать информацию с сайта (например, UTM метки) и добавить ее в карточку сделки или контакта, заполнив поля или добавив примечание. Однако, если поле уже заполнено, обновить информацию нельзя. Добавлять информацию к сделке и контакту можно не дольше чем, 24 часа с момента отправки первых данных или создания неразобранного в аккаунте.

Если вы размещали кнопку до 23.11.2019 – может потребоваться обновить код кнопки на сайте

Метод позволяет передать информацию в поля сделки, контакта или в примечание. Метод должен быть вызван из js части вашего сайта, на котором находится кнопка обратной связи.

После установки кнопки обратной связи, будет доступ объект в глобальной области видимости amo\_social\_button

    amo_social_button.setMeta(params);

#### Параметры

| Параметр | Тип | Описание |
| --- | --- | --- |
| note\[text\] | string | Текст примечания |
| note\[element\_type\] | int | Тип сущности элемента, в карточку которого будет добавлено примечание. Доступные типы: element\_type: 1 – карточка контакта, element\_type: 2 – карточка сделки |
| note\[note\_type\] | string | Тип добавляемого примечания. Доступные типы см. [здесь](https://www.amocrm.ru/developers/content/crm_platform/events-and-notes#notes-types) |
| contact\[name\] | string | Имя контакта |
| contact\[custom\_fields\] | array | Массив дополнительных полей сущности "Контакт" |
| contact\[custom\_fields\]\[0\]\[id\] | int | id дополнительного поля сущности "Контакт" |
| contact\[custom\_fields\]\[0\]\[values\] | array | Массив значений дополнительного поля |
| contact\[custom\_fields\]\[0\]\[values\]\[0\]\[value\] | string | Значение дополнительного поля |
| contact\[custom\_fields\]\[0\]\[values\]\[0\]\[enum\] | string | Идентификатор раннее предустановленного варианта выбора для списка или мультисписка |
| contact\[custom\_fields\]\[0\]\[values\]\[0\]\[subtype\] | string | Тип изменяемого элемента дополнительного поля типа "адрес". Внимание, все не указанные типы будут стёрты |
| lead\[name\] | string | Название сделки |
| lead\[sale\] | int | Бюджет сделки |
| lead\[custom\_fields\] | array | Массив дополнительных полей сущности "Сделка" |
| lead\[custom\_fields\]\[0\]\[id\] | int | id дополнительного поля сущности "Сделка" |
| lead\[custom\_fields\]\[0\]\[values\] | array | Массив значений дополнительного поля |
| lead\[custom\_fields\]\[0\]\[values\]\[0\]\[value\] | string | Значение дополнительного поля |
| lead\[custom\_fields\]\[0\]\[values\]\[0\]\[enum\] | string | Идентификатор раннее предустановленного варианта выбора для списка или мультисписка |
| lead\[custom\_fields\]\[0\]\[values\]\[0\]\[subtype\] | string | Тип изменяемого элемента дополнительного поля типа "адрес". Внимание, все не указанные типы будут стёрты |
| bot\_params/\* | json | Произвольный json-объект через который можно пробросить параметры в Salesbot |

#### Пример

    amo_social_button.setMeta({
      note: {
        text: 'Текст примечания',
        element_type: 1,
        note_type: "common",
      },
      contact: {
        name: 'Иван Иванов',
        custom_fields: [
          {
            id: 123456, values:
              [
                {
                  enum: 12345,
                  value: '+7123456789',
                }
             ]
          }
        ]
      },
      lead: {
        name: 'Название сделки',
        sale: 999,
      }
    })